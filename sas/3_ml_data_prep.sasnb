[{"kind":1,"language":"markdown","value":"### Machine Learning Data Preparation\nThis notebook splits the data into training-validation-test and applies Weights of Evidence transformation to it.","outputs":[]},{"kind":1,"language":"markdown","value":"### PARTITION THE INPUT DATA","outputs":[]},{"kind":1,"language":"markdown","value":"* Stratified Partitioning using a target variable\n* Partition into training(70), validation(20), and test(10)","outputs":[]},{"kind":2,"language":"sas","value":"proc partition data=&WBDataLib..&inputData. partind samppct=70 samppct2=20 seed=1337;\n\tby ___; *DEFINE partition variable;\n\toutput out=&WBDataLib..&partData.;\n\tods exclude OutputCasTables;\nrun;\n\n* The _PARTIND_ ='3' is the non-sampled observations corresponding to 10% of the dataset. \n  this will be treated as the 'test' dataset, and is something not used in the model training process.;\ndata &WBDataLib..&partData.;\n\tset &WBDataLib..&partData.;\n\tif _PartInd_=0 then\n\t\t_PartInd_=3;\nrun;\n\nproc freq data=&WBDataLib..&partData.;\ntable _PartIND_;\nrun;\n\nproc delete data=work._sorted_;\nrun;","outputs":[]},{"kind":1,"language":"markdown","value":"### Create separate train/validation and test (out-of-sample) datasets","outputs":[]},{"kind":2,"language":"sas","value":"* Creating Test Dataset;\ndata &WBDatalib..&HoldOut.;\n  set &WBDataLib..&partdata.;\n  if _PARTIND_ ='3';\nrun;\n\n* Creating Train + Val Dataset;\ndata &WBDatalib..&trainValidate.;\n  set &WBDataLib..&partdata.;\n  if _PARTIND_ ne '3';\nrun;\n\n* Let's compare distributions of Default between the two datasets;\ntitle 'Training/Validaiton dataset';\nproc freq data=&WBDatalib..&trainValidate.;\ntable default;\nrun;\n\ntitle 'Hold Out Sample';\nproc freq data=&WBDataLib..&HoldOut.;\ntable default;\nrun;\n\ntitle;","outputs":[]},{"kind":1,"language":"markdown","value":"### Apply Weights of Evidence Transformation\nWhat is Weight of Evidence?\nThe Weight of Evidence (WOE) tells the predictive power of an independent variable in relation to the dependent variable. Since it evolved from credit scoring world, it is generally described as a measure of the separation of good and bad customers. \"Bad Customers\" refers to the customers who defaulted on a loan. and \"Good Customers\" refers to the customers who paid back loan.\n\n$$ WOE = ln(Distribution of Goods/Distribution of Bads)$$\n\nWith:\n- Distribution of Goods = % of Good Customers in a particular group\n- Distribution of Bads = % of Bad Customers in a particular group","outputs":[]},{"kind":2,"language":"sas","value":"proc binning data=&WBDataLib..&trainValidate. method=quantile WOE(WOEADJUST=.5) numbin=5;\n  input CreditLineAge\n        DebtIncRatio\n        FICOScore\n        Inquiries6Mnths\n        LogAnnualInc\n        RevBalance\n        RevUtilization\n        ;\n  code file=&codeFile.;\n  output out=&binOutput. COPYVAR=id;\n  ods output InfoValue = &WBDataLib..InfoValues;\n  ods output BinDetails = &WBDataLib..BinDetails;\n  ods exclude OutputCasTables;\n  target Default / event = '1';\nrun;\n\n* High Information Value (IV) = better predictions from that variable \n  IV = âˆ‘ (% of non-events - % of events) * WOE;","outputs":[]},{"kind":2,"language":"sas","value":"","outputs":[]}]